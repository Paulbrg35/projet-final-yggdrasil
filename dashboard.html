<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="darkreader-disable" content="true">
    <meta name="color-scheme" content="light">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord - Yggdrasil</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&family=Lato:wght@400;700&family=Cormorant+Garamond:wght@700&display=swap" rel="stylesheet">
    
    <!-- OpenDyslexic -->
    <link href="https://fonts.cdnfonts.com/css/open-dyslexic" rel="stylesheet">

    <style>
        :root {
            --forest-green: #2E5D42;
            --gold: #D4AF37;
            --cream: #F8F5F0;
            --light-cream: #FFF9F0;
            --text-dark: #333;
            --text-light: #666;
            --border-color: #E0D8C8;

            --bg-body: #FFF9F0;
            --bg-section: #FFF9F0;
            --header-bg: #2E5D42;
            --text-color: #333333;
            --card-bg: #FFFFFF;
            --footer-bg: #2E5D42;
            --shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .dark-mode {
            --bg-body: #1a1a1a;
            --bg-section: #2d2d2d;
            --header-bg: #1e3d2a;
            --text-color: #e0e0e0;
            --card-bg: #222;
            --border-color: #444;
            --footer-bg: #1e3d2a;
        }

        body {
            font-family: 'Lato', Arial, sans-serif;
            color: var(--text-color);
            background-color: var(--bg-body);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            transition: all 0.4s ease;
        }

        h1, h2, h3 {
            font-family: 'Cormorant Garamond', Georgia, serif;
            color: var(--forest-green);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 1rem 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background-color: var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--forest-green);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .logo-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        nav a {
            color: white;
            text-decoration: none;
            margin-left: 1.5rem;
            font-weight: 500;
        }

        /* Accessibility Controls */
        .accessibility-controls {
            display: flex;
            justify-content: center;
            margin: 1.5rem 0;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .dyslexia-button {
            background-color: var(--forest-green);
            color: white;
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dyslexia-button:hover {
            background-color: var(--gold);
            transform: translateY(-2px);
        }

        .dyslexia-button.active {
            background-color: var(--gold);
            color: var(--forest-green);
        }

        /* Language Toggle Button */
        #lang-toggle {
            background-color: var(--forest-green);
            color: white;
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
        }

        /* Dashboard Hero */
        .dashboard-hero {
            padding: 6rem 0;
            text-align: center;
            background: linear-gradient(135deg, var(--light-cream), var(--bg-section));
            border-bottom: 1px solid var(--border-color);
        }

        .dashboard-hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .dashboard-hero p {
            font-size: 1.2rem;
            color: var(--text-dark);
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }

        .cta-button {
            background-color: var(--gold);
            color: var(--forest-green);
            padding: 0.9rem 1.8rem;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cta-button:hover {
            background-color: white;
            transform: translateY(-3px);
        }

        .secondary-button {
            background-color: transparent;
            color: var(--forest-green);
            padding: 0.9rem 1.8rem;
            border: 2px solid var(--forest-green);
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .secondary-button:hover {
            background-color: var(--forest-green);
            color: white;
        }

        /* Features After Signup */
        .dashboard-features {
            padding: 5rem 0;
            background-color: var(--bg-section);
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 2rem;
            position: relative;
            display: inline-block;
            padding-bottom: 0.5rem;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background-color: var(--gold);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .feature-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background-color: var(--light-cream);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: var(--forest-green);
            font-size: 1.5rem;
        }

        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }

        /* Footer */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 3rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            color: var(--gold);
            margin-bottom: 1.2rem;
            font-size: 1.1rem;
        }

        .footer-column ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .footer-column ul li {
            margin-bottom: 0.6rem;
        }

        .footer-column a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column a:hover {
            color: var(--gold);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .export-buttons {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
            gap: 1rem;
            background-color: var(--footer-bg);
        }

        /* OpenDyslexic Font */
        .opendyslexic {
            font-family: 'OpenDyslexic', 'Open Sans', 'Lato', sans-serif !important;
            line-height: 1.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            nav {
                margin-top: 0.5rem;
            }
            .dashboard-hero h1 {
                font-size: 2rem;
            }
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            .section-title h2 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>

    <!-- Load OpenDyslexic early -->
    <script>
        function loadOpenDyslexicFont() {
            if (!document.getElementById('opendyslexic-font')) {
                const link = document.createElement('link');
                link.id = 'opendyslexic-font';
                link.rel = 'stylesheet';
                link.href = 'https://fonts.cdnfonts.com/css/open-dyslexic';
                document.head.appendChild(link);
            }
        }
        loadOpenDyslexicFont();
    </script>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="img/logo.png" class="logo-icon">
                        <img src="img/logo.png" alt="Yggdrasil Logo" style="width: 40px; height: 40px;">
                    </a>
                    <div class="logo-text">Yggdrasil</div>
                </div>
                <nav>
                    <a href="tree.html" data-i18n="nav.tree">Mon Arbre</a>
                    <a href="family.html" data-i18n="nav.family">Ma Famille</a>
                    <a href="profile.php" data-i18n="nav.profile">Profil</a>
                    <a href="logout.php" data-i18n="nav.logout">Déconnexion</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Accessibility Controls -->
    <div class="container">
        <div class="accessibility-controls">
            <button id="dyslexia-toggle" class="dyslexia-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M4 4a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 4zm0 3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5z"/>
                    <path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2zm13 2v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1z"/>
                </svg>
                <span data-i18n="access.dyslexia">Mode Dyslexie</span>
            </button>
            <button id="theme-toggle" class="dyslexia-button">
                🌙 <span data-i18n="access.dark">Passer en mode sombre</span>
            </button>
            <button id="lang-toggle" class="dyslexia-button">
                🌍 <span id="lang-text">FR → EN → BR</span>
            </button>
        </div>
    </div>

    <!-- Dashboard Hero -->
    <section class="dashboard-hero">
        <div class="container">
            <h1 data-i18n="dashboard.welcome">Bienvenue, <span id="user-firstname">Prénom</span> !</h1>
            <p data-i18n="dashboard.subtitle">Votre aventure familiale commence maintenant. Construisez, explorez et partagez votre arbre généalogique avec vos proches.</p>
            <div class="hero-buttons">
                <a href="tree-builder.html" class="cta-button" data-i18n="dashboard.start_tree">Commencer mon arbre</a>
                <a href="invite.html" class="secondary-button" data-i18n="dashboard.invite">Inviter ma famille</a>
            </div>
        </div>
    </section>

    <!-- Features After Signup -->
    <section class="dashboard-features">
        <div class="container">
            <div class="section-title">
                <h2 data-i18n="dashboard.features">Ce que vous pouvez faire</h2>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🌳</div>
                    <h3 data-i18n="feature.tree">Arbre Interactif</h3>
                    <p data-i18n="feature.tree.desc">Ajoutez vos ancêtres, génération après génération, avec photos et dates.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">👥</div>
                    <h3 data-i18n="feature.collab">Collaborer</h3>
                    <p data-i18n="feature.collab.desc">Partagez votre arbre et travaillez ensemble pour enrichir votre histoire.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🖼️</div>
                    <h3 data-i18n="feature.gallery">Galerie de Souvenirs</h3>
                    <p data-i18n="feature.gallery.desc">Téléchargez des photos, lettres et documents familiaux.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 data-i18n="footer.support">Support</h3>
                    <ul>
                        <li><a href="explication/faq.php" data-i18n="footer.faq">Aide & FAQ</a></li>
                        <li><a href="tutoriel/tutorials.html">Tutoriels</a></li>
                        <li><a href="contact.php">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 data-i18n="footer.legal">Légal</h3>
                    <ul>
                        <li><a href="#" class="modal-link" data-modal="terms">CGU</a></li>
                        <li><a href="#" class="modal-link" data-modal="privacy">Confidentialité</a></li>
                        <li><a href="gdpr.php">RGPD</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 data-i18n="footer.social">Réseaux</h3>
                    <ul>
                        <li><a href="#">Facebook</a></li>
                        <li><a href="#">Instagram</a></li>
                        <li><a href="#">Twitter</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Yggdrasil. <span data-i18n="footer.allrights">Tous droits réservés.</span></p>
            </div>
        </div>
    </footer>

    <!-- MODALS (CGU & Confidentialité) -->
    <div id="terms-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="modal.terms_title">Conditions d'Utilisation</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p data-i18n="modal.terms_p1">En utilisant Yggdrasil, vous acceptez nos conditions.</p>
                <p data-i18n="modal.terms_full"><strong>Contenu complet des CGU ici…</strong> (à compléter)</p>
            </div>
        </div>
    </div>

    <div id="privacy-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="modal.privacy_title">Politique de Confidentialité</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p data-i18n="modal.privacy_p1">Nous protégeons vos données conformément au RGPD.</p>
                <p data-i18n="modal.privacy_full"><strong>Politique complète ici…</strong> (à compléter)</p>
            </div>
        </div>
    </div>
    <div class="export-buttons">
    <a href="export_gedcom.php" class="export-btn" style="
        background-color: #D4AF37;
        color: #2E5D42;
        padding: 1rem 1.5rem;
        margin: 0.5rem;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        display: inline-block;
    ">📤 Exporter en GEDCOM</a>

    <a href="export_pdf.php" class="export-btn" style="
        background-color: #D4AF37;
        color: #2E5D42;
        padding: 1rem 1.5rem;
        margin: 0.5rem;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        display: inline-block;
    ">📄 Exporter en PDF</a>
</div>

    <!-- SCRIPTS -->
    <script>
        // === SIMULER LE PRÉNOM UTILISATEUR (à remplacer par PHP plus tard) ===
        // Ex: depuis l'URL ?firstname=Jean
        const urlParams = new URLSearchParams(window.location.search);
        const firstname = urlParams.get('firstname') || 'Utilisateur';
        document.getElementById('user-firstname').textContent = firstname;

        // === DICTIONNAIRE DE TRADUCTION (FR/EN/BR) ===
        const translations = {
            fr: {
                'nav.tree': 'Mon Arbre',
                'nav.family': 'Ma Famille',
                'nav.profile': 'Profil',
                'nav.logout': 'Déconnexion',
                'access.dyslexia': 'Mode Dyslexie',
                'access.dark': 'Passer en mode sombre',
                'dashboard.welcome': 'Bienvenue, <span id="user-firstname">Prénom</span> !',
                'dashboard.subtitle': 'Votre aventure familiale commence maintenant. Construisez, explorez et partagez votre arbre généalogique avec vos proches.',
                'dashboard.start_tree': 'Commencer mon arbre',
                'dashboard.invite': 'Inviter ma famille',
                'dashboard.features': 'Ce que vous pouvez faire',
                'feature.tree': 'Arbre Interactif',
                'feature.tree.desc': 'Ajoutez vos ancêtres, génération après génération, avec photos et dates.',
                'feature.collab': 'Collaborer',
                'feature.collab.desc': 'Partagez votre arbre et travaillez ensemble pour enrichir votre histoire.',
                'feature.gallery': 'Galerie de Souvenirs',
                'feature.gallery.desc': 'Téléchargez des photos, lettres et documents familiaux.',
                'footer.support': 'Support',
                'footer.legal': 'Légal',
                'footer.social': 'Réseaux',
                'footer.allrights': 'Tous droits réservés.',
                'modal.terms_title': 'Conditions d\'Utilisation',
                'modal.terms_p1': 'En utilisant Yggdrasil, vous acceptez nos conditions.',
                'modal.terms_full': '<strong>Contenu complet des CGU ici…</strong> (à compléter)',
                'modal.privacy_title': 'Politique de Confidentialité',
                'modal.privacy_p1': 'Nous protégeons vos données conformément au RGPD.',
                'modal.privacy_full': '<strong>Politique complète ici…</strong> (à compléter)'
            },
            en: {
                'nav.tree': 'My Tree',
                'nav.family': 'My Family',
                'nav.profile': 'Profile',
                'nav.logout': 'Logout',
                'access.dyslexia': 'Dyslexia Mode',
                'access.dark': 'Switch to Dark Mode',
                'dashboard.welcome': 'Welcome, <span id="user-firstname">Firstname</span>!',
                'dashboard.subtitle': 'Your family journey begins now. Build, explore, and share your family tree with loved ones.',
                'dashboard.start_tree': 'Start My Tree',
                'dashboard.invite': 'Invite My Family',
                'dashboard.features': 'What You Can Do',
                'feature.tree': 'Interactive Tree',
                'feature.tree.desc': 'Add your ancestors, generation after generation, with photos and dates.',
                'feature.collab': 'Collaborate',
                'feature.collab.desc': 'Share your tree and work together to enrich your story.',
                'feature.gallery': 'Memory Gallery',
                'feature.gallery.desc': 'Upload photos, letters, and family documents.',
                'footer.support': 'Support',
                'footer.legal': 'Legal',
                'footer.social': 'Social',
                'footer.allrights': 'All rights reserved.',
                'modal.terms_title': 'Terms of Service',
                'modal.terms_p1': 'By using Yggdrasil, you agree to our terms.',
                'modal.terms_full': '<strong>Full terms content here…</strong> (to complete)',
                'modal.privacy_title': 'Privacy Policy',
                'modal.privacy_p1': 'We protect your data in compliance with GDPR.',
                'modal.privacy_full': '<strong>Full policy here…</strong> (to complete)'
            },
            br: {
                'nav.tree': 'Ho Kernezenn',
                'nav.family': 'Ho Teuli',
                'nav.profile': 'Profil',
                'nav.logout': 'Digevreañ',
                'access.dyslexia': 'Mod Dyslexie',
                'access.dark': 'Trec\'h da gouloù tiñj',
                'dashboard.welcome': 'Degemer mat, <span id="user-firstname">Anv</span> !',
                'dashboard.subtitle': 'Kregiñ a ra hoc\'h aventur teul. Sevelit, skoazellit ha rannañ hoc\'h arvoz genealogel gant ho karantez.',
                'dashboard.start_tree': 'Krouiñ Ma Kernezenn',
                'dashboard.invite': 'Kerkent Ma Teuli',
                'dashboard.features': 'Petra a c\'hellit ober',
                'feature.tree': 'Kernezenn Skaragadus',
                'feature.tree.desc': 'Ouzhpennit ho zudeni, genadur war genadur, gant skeudennoù ha deizioù.',
                'feature.collab': 'Kendeuz',
                'feature.collab.desc': 'Rannañ hoc\'h arvoz ha labourat kempen evit pennañ ho istor.',
                'feature.gallery': 'Kened Souvenezioù',
                'feature.gallery.desc': 'Enprennañ skeudennoù, leturioù ha titouroù teul.',
                'footer.support': 'Skor',
                'footer.legal': 'Lezenn',
                'footer.social': 'Kenurzhiaou',
                'footer.allrights': 'An holl gwirioù rezervet.',
                'modal.terms_title': 'Ranneloù Implijout',
                'modal.terms_p1': 'En ur implijout Yggdrasil, e gemerit ar ranneloù.',
                'modal.terms_full': '<strong>Kontenenn kompled ar ranneloù amañ…</strong> (da gomprennañ)',
                'modal.privacy_title': 'Politegerez Aotre',
                'modal.privacy_p1': 'Gouzout a ra bout ho titouroù en ur gomziant GDPR.',
                'modal.privacy_full': '<strong>Polisig kompled amañ…</strong> (da gomprennañ)'
            }
        };

        // Langues
        const languages = ['fr', 'en', 'br'];
        const langNames = {
            fr: 'FR → EN → BR',
            en: 'EN → BR → FR',
            br: 'BR → FR → EN'
        };

        function setLanguage(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    el.innerHTML = translations[lang][key].replace('<span id="user-firstname">Prénom</span>', `<span id="user-firstname">${firstname}</span>`);
                }
            });
            document.getElementById('lang-text').textContent = langNames[lang];
            document.documentElement.lang = lang;
            localStorage.setItem('language', lang);
        }

        document.addEventListener('DOMContentLoaded', function () {
            const savedLang = localStorage.getItem('language') || 'fr';
            setLanguage(savedLang);

            // Bascule langue
            document.getElementById('lang-toggle').addEventListener('click', () => {
                const currentLang = localStorage.getItem('language') || 'fr';
                const nextLang = languages[(languages.indexOf(currentLang) + 1) % languages.length];
                setLanguage(nextLang);
            });

            // === MODALS ===
            const termsModal = document.getElementById('terms-modal');
            const privacyModal = document.getElementById('privacy-modal');
            const closeModal = document.querySelectorAll('.modal-close');
            const modalLinks = document.querySelectorAll('.modal-link');

            modalLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const modalType = link.getAttribute('data-modal');
                    if (modalType === 'terms') termsModal.style.display = 'flex';
                    if (modalType === 'privacy') privacyModal.style.display = 'flex';
                });
            });

            closeModal.forEach(btn => {
                btn.addEventListener('click', () => {
                    termsModal.style.display = 'none';
                    privacyModal.style.display = 'none';
                });
            });

            window.addEventListener('click', (e) => {
                if (e.target === termsModal) termsModal.style.display = 'none';
                if (e.target === privacyModal) privacyModal.style.display = 'none';
            });

            // === MODE DYSLEXIE & SOMBRE ===
            const dyslexiaToggle = document.getElementById('dyslexia-toggle');
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;

            if (localStorage.getItem('dyslexiaMode') === 'true') body.classList.add('opendyslexic');
            dyslexiaToggle.addEventListener('click', () => {
                body.classList.toggle('opendyslexic');
                localStorage.setItem('dyslexiaMode', body.classList.contains('opendyslexic') ? 'true' : 'false');
            });

            if (localStorage.getItem('theme') === 'dark') body.classList.add('dark-mode');
            themeToggle.addEventListener('click', () => {
                body.classList.toggle('dark-mode');
                localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
            });
        });
    </script>
</body>
</html>